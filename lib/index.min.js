"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function getCharSetsForRegex(a){var b="";return-1<a.indexOf("alphabets")&&(b+="A-Za-z"),-1<a.indexOf("spaces")&&(b+=" "),-1<a.indexOf("decimals")&&-1<a.indexOf("numbers")||-1<a.indexOf("decimals")&&0>a.indexOf("numbers")?b+="0-9\\.":-1<a.indexOf("numbers")&&(b+="0-9"),b}function addNewErrorMessageOrIgnore(a,b){0>a.indexOf(b)&&a.push(b)}var validationRules={minLen:function c(a,b){if(a&&a.length<b)return-1},maxLen:function c(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(a&&a.length>b)return-1},betweenLen:function d(a,b,c){if(a&&(a.length>c||a.length<b))return-1},exactLen:function c(a,b){if(a&&a.length!=b)return-1},min:function c(a,b){if(a&&parseFloat(a)<b)return-1},max:function c(a,b){if(a&&parseFloat(a)>b)return-1},between:function d(a,b,c){if(a){var e=parseFloat(a);return e>c||e<b?-1:1}},exactly:function c(a,b){if(a&&parseFloat(a)!=b)return-1},notRegex:function d(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"";if(a&&!new RegExp(b.replace(/^\/+/,"").replace(/\/+$/,""),c).test(a))return-1},regex:function d(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"";if(a&&new RegExp(b.replace(/^\/+/,"").replace(/\/+$/,""),c).test(a))return-1},equals:function b(a,c){if(a&&c&&a!=c)return-1},email:function h(a){if(a&&a.length){var i=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;if(254<a.length||!i.test(a))return-1;var b=a.split("@"),c=b[0],d=b[1],e=d.split("."),f=e[0],g=e[0];if(64<c.length||63<f.length||63<g.length)return-1}},in:function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(b[0].length&&0>b.slice(1).indexOf(b[0]))return-1},allowedChars:function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(new RegExp("[^"+getCharSetsForRegex(b.slice(1))+"]+","gim").test(b[0]))return-1},notAllowedChars:function d(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(new RegExp("["+getCharSetsForRegex(b.slice(1))+"]+","gim").test(b[0]))return-1},required:function c(a){var b=a.toString();if(!b||!b.length||!b.trim().length)return-1},bool:function b(a){if("boolean"!=typeof a)return-1}},_default=function(c,d,e){if(!c||c.constructor!==Object)throw new Error("input-validator-js: expected parameter 1 to be an object.");if(!d||d.constructor!==Object)throw new Error("input-validator-js: expected parameter 2 to be an object.");if(!e||e.constructor!==Object)throw new Error("input-validator-js: expected parameter 3 to be an object");for(var f=[],g=Object.keys(d),h=0;h<g.length;h++)if("_$options"!==g[h])for(var i=g[h].replace(/\_$/,""),j=d[i].split("; "),k=0;k<=j.length-1;k++)if(j[k]){var l=j[k].split(":"),m=l[0],n=l[1],o=null,p=[];if(void 0===validationRules[m])throw new Error("input-validator-js: unknown rule `"+m+"` provided for field `"+g[h]+"`. Please refer to the docs for more info.");if(void 0===c[i])throw new Error("input-validator-js: unknown field "+g[h]+" in inputs.");if(!n)o=validationRules[m](c[i]),p.push(g[h]);else if(-1<n.indexOf(",")){var q=n.split(",");o=validationRules[m].apply(validationRules,[c[i]].concat(_toConsumableArray(q))),p.push.apply(p,[g[h]].concat(_toConsumableArray(q)))}else c[n]?(o=validationRules[m](c[i],c[n]),p.push(g[h],c[n])):(o=validationRules[m](c[i],n),p.push(g[h],n));if(-1===o&&(e&&e[i]&&!e[i][m]&&e[i]._$all?addNewErrorMessageOrIgnore(f,e[i]._$all):addNewErrorMessageOrIgnore(f,e[i][m]),d._$options&&d._$options.stopAtFirstError))break}return f};exports.default=_default;